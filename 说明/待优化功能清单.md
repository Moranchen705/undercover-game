# 游戏方客户端 - 待优化功能清单

## ✅ 已完成功能

- [x] 组名注册
- [x] 词语获取和显示
- [x] 状态轮询机制
- [x] 描述提交（基础功能）
- [x] 投票提交（基础功能）
- [x] GUI基础界面
- [x] 游戏日志显示

---

## 🔴 P0 - 必须完成（题目要求）

### 1. 描述时间限制（3秒倒计时）⭐ **最高优先级**
**当前状态**：代码中有TODO标记，未实现

**需要实现**：
- [ ] 当状态变为 `describing` 时，启动3秒倒计时
- [ ] 在界面上显示倒计时（`剩余时间: 3秒`）
- [ ] 倒计时结束后自动禁用提交按钮
- [ ] 如果3秒内未提交，给出提示

**实现位置**：`client.py` 第205行 TODO处

**参考代码位置**：
```python
# 在 update_status 方法中，当 status == 'describing' 时
# 启动倒计时线程，更新 self.desc_time_label
```

---

## 🟡 P1 - 重要功能（提升体验）

### 2. 投票结果显示
**当前状态**：可以提交投票，但看不到结果

**需要实现**：
- [ ] 在投票阶段结束后，获取投票结果（`/api/result`）
- [ ] 在界面上显示投票统计
- [ ] 显示被淘汰的组
- [ ] 显示游戏是否结束

**实现位置**：`client.py` 的 `update_status` 方法中

### 3. 其他组描述展示
**当前状态**：只能看到自己的描述

**需要实现**：
- [ ] 在描述阶段结束后，获取所有组的描述
- [ ] 在界面上展示其他组的描述
- [ ] 方便分析判断谁是卧底

**实现位置**：需要新增一个显示区域，或使用弹窗

### 4. 游戏策略实现
**当前状态**：`game_strategy.py` 只有框架代码

**需要实现**：
- [ ] 完善 `generate_description()` 方法
  - 根据词语生成合适的描述
  - 平民：贴合词语但不说出词语
  - 卧底：模糊描述，避免暴露
- [ ] 完善 `decide_vote()` 方法
  - 根据描述内容分析
  - 找出可疑的组
  - 智能投票决策

**实现位置**：`game_strategy.py`

### 5. 身份判断和显示
**当前状态**：不知道自己是平民还是卧底

**需要实现**：
- [ ] 根据词语判断身份（需要知道平民词和卧底词）
- [ ] 在界面上显示身份（"平民" 或 "卧底"）
- [ ] 根据身份调整策略

**注意**：平台方API不直接返回身份，需要根据词语判断

---

## 🟢 P2 - 优化功能（锦上添花）

### 6. 界面美化
- [ ] 优化颜色搭配
- [ ] 添加图标和图片
- [ ] 优化布局和间距
- [ ] 添加动画效果

### 7. 异常处理完善
- [ ] 网络断开重连机制
- [ ] 更友好的错误提示
- [ ] 异常上报功能集成

### 8. 用户体验优化
- [ ] 描述输入框自动聚焦
- [ ] 快捷键支持（如Enter提交）
- [ ] 声音提示（可选）
- [ ] 游戏历史记录

### 9. 策略算法优化
- [ ] 更智能的描述生成
- [ ] 基于机器学习的投票决策（可选）
- [ ] 策略参数可配置

---

## 📋 开发优先级建议

### 第1周重点
1. **描述时间限制（3秒倒计时）** - 必须完成
2. 投票结果显示
3. 游戏策略基础实现

### 第2周重点
1. 其他组描述展示
2. 身份判断和显示
3. 策略算法优化

### 第3周重点
1. 界面美化
2. 异常处理完善
3. 测试和优化

---

## 🛠️ 技术实现提示

### 倒计时实现方法
```python
import threading
import time

def start_countdown(self, seconds=3):
    """启动倒计时"""
    def countdown():
        for i in range(seconds, 0, -1):
            self.root.after(0, self.update_time_label, i)
            time.sleep(1)
        self.root.after(0, self.timeout_handler)
    
    thread = threading.Thread(target=countdown, daemon=True)
    thread.start()
```

### 获取投票结果
```python
# 在状态变为 round_end 或 game_end 时
result = self.api_client.get_result()
if result:
    # 显示投票结果
    vote_count = result.get('vote_count', {})
    eliminated = result.get('eliminated', [])
```

---

## 📝 注意事项

1. **时间限制是关键**：3秒倒计时是题目明确要求，必须实现
2. **策略要合理**：不需要太复杂，但要能体现思考过程
3. **界面要友好**：确保用户能清楚看到当前状态和操作提示
4. **测试要充分**：多组联调，确保稳定性

