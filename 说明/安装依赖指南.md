# 依赖安装指南

## 一、平台方依赖安装

### 方法1：在PyCharm中安装（推荐）

1. **打开项目后，PyCharm会自动检测requirements.txt**
   - 如果看到提示"Install requirements"，点击安装即可

2. **手动安装**：
   - 打开PyCharm底部的"Terminal"（终端）
   - 执行以下命令：
   ```bash
   cd 平台方
   pip install -r requirements.txt
   ```

### 方法2：命令行安装

```bash
# 进入平台方目录
cd 平台方

# 安装依赖
pip install -r requirements.txt
```

### 平台方需要的依赖包：
- `Flask==3.0.0` - Web框架
- `Flask-CORS==4.0.0` - 跨域支持
- `Werkzeug==3.0.1` - WSGI工具库
- `requests==2.31.0` - HTTP请求库

---

## 二、玩家方依赖安装

### 方法1：在PyCharm中安装

1. 打开PyCharm底部的"Terminal"（终端）
2. 执行以下命令：
   ```bash
   cd 玩家方
   pip install -r requirements.txt
   ```

### 方法2：命令行安装

```bash
# 进入玩家方目录
cd 玩家方

# 安装依赖
pip install -r requirements.txt
```

### 玩家方需要的依赖包：
- `requests==2.31.0` - HTTP请求库
- `Tkinter` - GUI框架（Python内置，无需安装）

---

## 三、完整安装和运行流程

### 步骤1：安装平台方依赖
```bash
cd 平台方
pip install -r requirements.txt
```

### 步骤2：安装玩家方依赖
```bash
cd 玩家方
pip install -r requirements.txt
```

### 步骤3：运行平台方服务器
在PyCharm中：
- 右键 `平台方/backend.py` → Run 'backend'
- 看到以下输出表示成功：
  ```
  ==================================================
  谁是卧底 - 主持方平台
  ==================================================
  服务器启动中...
  本地访问: http://127.0.0.1:5000
  局域网访问: http://192.168.x.x:5000
  ==================================================
  ```

### 步骤4：运行玩家方客户端
在PyCharm中：
- 右键 `玩家方/client.py` → Run 'client'
- GUI界面会打开

---

## 四、使用虚拟环境（推荐）

### 为什么使用虚拟环境？
- 避免不同项目的依赖冲突
- 保持项目依赖的独立性
- 便于项目部署

### 在PyCharm中创建虚拟环境：

1. **File → Settings → Project → Python Interpreter**
2. 点击齿轮图标 → **Add Interpreter → Add Local Interpreter**
3. 选择 **Virtualenv Environment**
4. 设置虚拟环境路径（建议在项目根目录下的 `.venv` 文件夹）
5. 点击 **OK**

### 在虚拟环境中安装依赖：

1. 确保PyCharm使用的是虚拟环境解释器
2. 打开Terminal（会自动激活虚拟环境）
3. 执行安装命令：
   ```bash
   # 安装平台方依赖
   cd 平台方
   pip install -r requirements.txt
   
   # 安装玩家方依赖
   cd ../玩家方
   pip install -r requirements.txt
   ```

---

## 五、验证安装

### 检查平台方依赖：
```bash
pip list | grep -E "Flask|requests"
```

应该看到：
- Flask 3.0.0
- Flask-CORS 4.0.0
- requests 2.31.0
- Werkzeug 3.0.1

### 检查玩家方依赖：
```bash
pip list | grep requests
```

应该看到：
- requests 2.31.0

---

## 六、常见问题

### Q1: pip install 失败怎么办？
**可能原因**：
1. 网络问题（需要科学上网或使用国内镜像）
2. Python版本不兼容

**解决方法**：
```bash
# 使用清华镜像源（国内用户推荐）
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### Q2: 提示"pip不是内部或外部命令"？
**解决方法**：
- 确保Python已正确安装
- 检查Python是否添加到系统PATH
- 在PyCharm中使用Terminal，它会自动使用项目配置的Python解释器

### Q3: 安装后还是提示"ModuleNotFoundError"？
**解决方法**：
1. 确认使用的是正确的Python解释器（虚拟环境）
2. 重新安装依赖：`pip install -r requirements.txt --force-reinstall`
3. 检查PyCharm的Python Interpreter设置

---

## 七、快速检查清单

在运行代码前，确认：
- [ ] 平台方依赖已安装（Flask, Flask-CORS, requests）
- [ ] 玩家方依赖已安装（requests）
- [ ] Python解释器配置正确（PyCharm中）
- [ ] 虚拟环境已激活（如果使用）

