# 游戏方客户端运行指南

## 快速开始

### 第一步：启动后端服务器（必须！）

在运行游戏方客户端之前，**必须先启动主持方的后端服务器**。

#### 方法1：在PyCharm中运行
1. 右键点击 `平台方/backend.py`
2. 选择 "Run 'backend'"
3. 看到以下输出表示启动成功：
   ```
   ==================================================
   谁是卧底 - 主持方平台
   ==================================================
   服务器启动中...
   本地访问: http://127.0.0.1:5000
   局域网访问: http://192.168.x.x:5000
   ==================================================
   ```

#### 方法2：命令行运行
```bash
cd 平台方
python backend.py
```

### 第二步：运行游戏方客户端

#### 方法1：运行GUI界面（推荐）
1. 右键点击 `玩家方/client.py`
2. 选择 "Run 'client'"
3. 在GUI界面中：
   - 输入服务器地址（默认：http://127.0.0.1:5000）
   - 输入组名
   - 点击"注册"按钮

#### 方法2：测试API连接
1. 右键点击 `玩家方/api_client.py`
2. 选择 "Run 'api_client'"
3. 按提示输入服务器地址和组名进行测试

## 常见问题

### Q1: 连接失败怎么办？
**错误信息**：`连接失败:无法连接到服务器 http://127.0.0.1:5000`

**解决方法**：
1. 确认后端服务器已启动（运行 `平台方/backend.py`）
2. 检查服务器地址是否正确
3. 如果使用局域网，确保使用正确的IP地址（查看backend.py启动时的"局域网访问"地址）

### Q2: 如何获取服务器IP地址？
- 后端服务器启动时会在控制台显示局域网IP
- 或者查看 `平台方/backend.py` 启动日志中的"局域网访问"地址

### Q3: 可以同时运行多个客户端吗？
**可以！** 每个客户端代表一个游戏组，需要同时运行多个客户端来模拟多组游戏。

#### 方法1：在PyCharm中运行多个实例

**问题**：PyCharm默认不允许同一个运行配置并行运行，会提示"进程 'client' 正在运行"。

**解决方案A：创建多个运行配置（推荐）**
1. 点击PyCharm顶部菜单 `Run` → `Edit Configurations...`
2. 找到 `client` 配置，点击左上角的 `+` 号，选择 `Python`
3. 创建新配置：
   - **Name**: `client-组1`（或任意名称）
   - **Script path**: 选择 `玩家方/client.py`
   - **Working directory**: 选择项目根目录
4. 重复步骤2-3，创建多个配置（如 `client-组2`、`client-组3` 等）
5. 现在可以同时运行多个配置了：
   - 点击运行按钮旁边的下拉菜单，选择不同的配置
   - 或者使用快捷键 `Shift+F10` 选择配置运行

**解决方案B：允许并行运行（简单但不够灵活）**
1. 点击 `Run` → `Edit Configurations...`
2. 选择 `client` 配置
3. 勾选 `Allow parallel run`（允许并行运行）
4. 现在可以多次点击运行按钮，会启动多个实例
5. **注意**：所有实例使用相同的配置，需要手动输入不同的组名

#### 方法2：使用命令行运行（最简单）
1. 打开多个命令行窗口（Windows: `Win+R` → `cmd`，或打开多个终端）
2. 在每个窗口中执行：
   ```bash
   cd 玩家方
   python client.py
   ```
3. 每个窗口会打开一个独立的客户端窗口
4. 在不同窗口中输入不同的组名即可

#### 方法3：使用PyCharm的Terminal（推荐用于测试）
1. 在PyCharm底部打开 `Terminal`（终端）
2. 运行第一个客户端：
   ```bash
   cd 玩家方
   python client.py
   ```
3. 点击终端标签旁边的 `+` 号，打开新的终端标签
4. 在新终端中再次运行：
   ```bash
   cd 玩家方
   python client.py
   ```
5. 重复步骤3-4，可以打开多个客户端实例

#### 推荐方案
- **开发测试**：使用方法2（命令行）或方法3（PyCharm Terminal），最简单直接
- **演示展示**：使用方法1（多个运行配置），更专业，便于管理

## 开发流程建议

1. **开发阶段**：
   - 启动后端服务器（保持运行）
   - 运行游戏方客户端进行开发测试
   - 修改代码后重新运行客户端

2. **测试阶段**：
   - 启动后端服务器
   - 启动前端界面（可选，用于查看游戏状态）
   - 运行多个客户端实例模拟多组游戏

3. **演示阶段**：
   - 确保所有功能正常
   - 准备演示脚本和测试数据

